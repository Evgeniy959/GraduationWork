@model HotelWebsiteBooking.Models.Entity.Room

@{
    ViewData["Title"] = "Tariff";
    int i = 0;
}

<div class="breadcrumb-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb-text">
                    <h2>Выберите тариф</h2>                    
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card mb-3">
    <div class="row g-0">
        <div class="col-md-3 media-img-wrapper">
            <a href="">
                <img class="media" src="~/@Model.Category.Photo" alt="Photo" />
            </a>
        </div>
        <div class="col-md-8">
            <div class="card-body">
                <a href="">
                    <h4 class="card-title"><strong>@Model.Category.Name</strong></h4>
                </a>
                <p class="card-text">Вместимость:&ensp; до @Model.Category.PersonsCount мест, &emsp; Площадь:&ensp; @Model.Category.Square, &emsp; Количество комнат:&ensp; 1, &emsp; Количество гостей:&ensp; @ViewBag.Guest</p>
                <h5>
                    Wi-Fi, кондиционер, телевизор, ванная комната с ванной...
                </h5>                
            </div>
            <div class="room-item">
                <div class="ri-text"><a asp-controller="Home" asp-action="@Model.Category.Path" asp-route-roomId="@Model.Id" class="primary-btn">Подробнее</a></div>
            </div>

        </div>
    </div>
</div>
<section class="rooms-section spad">
    <div class="container">
        <div class="row">
            @foreach (var item in Model.Category.TariffAdmins)
            {
                <div class="col-lg-3 col-md-6">
                    <div class="room-item">
                        <div class="ri-text">
                            <div class="col-lg-2">
                                <div class="breadcrumb-text">
                                    <div id="details" class="bt-option">
                                        <a ><span style="font-size: 14px">Подробнее</span></a>
                                    </div>
                                    
                                </div>
                            </div>
                            <div id="show-@item.TariffPlanId" class="col-lg-12" style="display: none;">
                                <p><strong>В стоимость тарифа включено:</strong></p>
                                <ul>
                                    <li>Без питания</li>
                                    <li>Завтрак включён</li>
                                    <li>Полупансион</li>
                                    <li>Включён завтрак, обед и ужин</li>
                                </ul>
                            </div>
                            <br>
                            <h4>@item.TariffPlan.Description</h4>
                            <h3>@(item.Price * ViewBag.Days) Р<span class="room-price">/@ViewBag.Days ночи</span></h3>
                            <br>
                            <div class="top-nav">
                                <div class="tn-right">
                                    <a asp-controller="Room" asp-action="Booking" asp-route-tariffId="@item.Id" asp-route-roomId="@Model.Id" asp-route-price="@(item.Price * ViewBag.Days)" asp-route-tariff="@item.TariffPlan.Description" class="bk-btn">Забронировать</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

@section Scripts{
    <script>
    let counter = 0;
    /*let show-1 = document.getElementById('show-1');
    let 2 = document.getElementById('2');
    let 3 = document.getElementById('3');
    let 4 = document.getElementById('4');*/
    let btops = document.querySelectorAll("bt-option");
        for (let i = 1; i <= btops.length; i++) {
            btops[i-1].onclick = function () {
                counter++;
                alert(counter);
                if (counter == 1) {
                    document.getElementById('show-1').style.display = "block";
                }
                if (counter == 2) {
                    document.getElementById(`'show-${i}'`).style.display = "none";
                    counter = 0;
                }
            }
        }

/*$('.bt-option').click(function() {
    //let shows = document.getElementById('show').style.display="block";
    counter++;
    if(counter == 1)
    {                        
        document.getElementById('show-1').style.display = "block";
    }
    if(counter == 2)
    {                        
        document.getElementById('show-1').style.display = "none";
        counter = 0;
    }        

});*/
</script>
@*<script>
    let counter = 0;
    let details = document.querySelectorAll('.col-lg-12');
    document.querySelector('.row').addEventListener('click', function () {
    if (event.target.className == 'col-lg-12') {
        event.target.style.display="block";
    //if (event.target.parentElement.children[6])) {
        /*counter++;
        for (const detail of details)
        {
            detail.style.display="block";
        }*/
        /*if(counter == 1)
        {                        
            detail.style.display="block";
        }
        if(counter == 2)
        {                        
            detail.style.display="none";
            counter = 0;
        }*/        
    }
});
</script>*@
}
